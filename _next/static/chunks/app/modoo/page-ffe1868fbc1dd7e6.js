(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[151],{9294:function(e,s,t){Promise.resolve().then(t.bind(t,67))},67:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return B}});var n=t(3827),l=t(8757),a=t(4090);function r(e){let{label:s,children:t}=e;return(0,n.jsxs)("div",{className:"px-0 py-6 grid grid-cols-3 gap-4 text-sm",children:[(0,n.jsx)("dt",{className:"flex justify-center items-start pt-3",children:s}),(0,n.jsx)("dd",{className:"col-span-2 text-start",children:t})]})}function i(e){let{children:s,onSubmit:t}=e;return(0,n.jsx)("form",{className:"mt-6 border-t border-gray-900",onSubmit:t,children:(0,n.jsx)("dl",{className:"divide-y divide-gray-900",children:s})})}var c=t(1073),o=t(4762),m=t(3125),d=t(3952);let x=(0,d.O4)("modooGameOption",{money:2e6,players:[{name:"참가자 1"},{name:"참가자 2"}]}),u=(0,m.v)((e,s)=>{let t=e(h),n=e(f);t&&0>n.findIndex(e=>e.id==t.id)&&s(f,[...n,{id:t.id,started:t.started}])}),j=(0,m.v)(e=>{let s=e(h);if(s){var t;t=s.id,"undefined"!=typeof localStorage&&localStorage.setItem("modooGame-".concat(t),JSON.stringify(s))}}),h=(0,d.rw)(void 0),f=(0,d.O4)("modooGames",[]);function p(){let[e,s]=(0,l.KO)(x);return(0,n.jsxs)("div",{className:"text-start grid gap-4",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsxs)("span",{children:[e.players.length," 명"]}),(0,n.jsxs)("button",{type:"button",className:"btn btn-xs ml-4 btn-primary",onClick:function(){s({...e,players:[...e.players,{name:"참여자 ".concat(e.players.length+1)}]})},children:[(0,n.jsx)(c.Z,{className:"w-4 h-4"})," 추가"]})]}),e.players.map((t,l)=>(0,n.jsxs)("div",{className:"join",children:[(0,n.jsx)("input",{className:"input input-bordered input-sm join-item w-full",value:t.name,onChange:t=>(function(t,n){let l=[...e.players];l.splice(t,1,{name:n}),s({...e,players:l})})(l,t.target.value)}),(0,n.jsx)("button",{type:"button",className:"btn btn-sm btn-error join-item",onClick:()=>(function(t){let n=[...e.players];n.splice(t,1),s({...e,players:n})})(l),children:(0,n.jsx)(o.Z,{className:"w-4 h-4"})})]},l))]})}function b(e){let{onClick:s}=e;return(0,n.jsx)("button",{type:"button",className:"btn btn-sm btn-warning",onClick:s,children:"0 원"})}function N(e){let{value:s,onClick:t}=e,l=(0,a.useMemo)(()=>s>0?"+".concat(s.toLocaleString()):s.toLocaleString(),[s]),r=(0,a.useMemo)(()=>s>0?"btn btn-sm btn-info":"btn btn-sm btn-error",[s]);return(0,n.jsxs)("button",{type:"button",className:r,onClick:()=>t(s),children:[l,"원"]})}function y(e){let{value:s,onChange:t,usePreset:l=!0,preset:r=[1e5,1e4,1e3,-1e5,-1e4,-1e3]}=e,i=(0,a.useMemo)(()=>Number(s).toLocaleString(),[s]);return(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsxs)("div",{className:"join",children:[(0,n.jsx)("input",{type:"text",className:"input input-bordered join-item w-full text-xl",value:i,onChange:e=>{t(Number(e.target.value.replaceAll(",","")))}}),(0,n.jsx)("div",{className:"join-item flex justify-center items-center w-14 bg-base-300",children:"원"})]}),l&&(0,n.jsxs)("div",{className:"flex flex-wrap gap-2 mt-4",children:[r.map(e=>(0,n.jsx)(N,{value:e,onClick:n=>t(s+e)},e)),(0,n.jsx)(b,{onClick:()=>t(0)})]})]})}function v(){let[e,s]=(0,l.KO)(x);return(0,n.jsx)(y,{value:e.money,onChange:function(t){s({...e,money:t})},usePreset:!1})}var g=t(4273),w=t(1231);function C(){let e=(0,l.b9)(h),s=(0,l.Dv)(x);return(0,n.jsxs)(i,{onSubmit:function(t){t.preventDefault(),e({id:(0,w.Z)(),started:new Date,option:s,players:s.players.map(e=>({id:(0,w.Z)(),money:s.money,name:e.name})),histories:[]})},children:[(0,n.jsx)(r,{label:"시작금액",children:(0,n.jsx)(v,{})}),(0,n.jsx)(r,{label:"참여자",children:(0,n.jsx)(p,{})}),(0,n.jsx)(r,{children:(0,n.jsxs)("button",{type:"submit",className:"btn btn-primary w-full",children:[(0,n.jsx)(g.Z,{className:"h-6 w-6"})," 시작하기"]})})]})}function k(e){let{open:s,onClose:t,children:l,title:r,subTitle:i}=e,c=(0,a.useMemo)(()=>s?{opacity:1,pointerEvents:"auto"}:{},[s]);return(0,n.jsxs)("dialog",{className:"modal",style:c,children:[(0,n.jsx)("div",{className:"fixed top-0 bottom-0 left-0 right-0 backdrop-blur",onClick:t}),(0,n.jsxs)("div",{className:"modal-box",children:[r&&(0,n.jsxs)("div",{className:"px-4 sm:px-0",children:[(0,n.jsx)("h3",{className:"leading-7 text-xl",children:r}),i&&(0,n.jsx)("p",{className:"mt-1 leading-6 text-sm text-gray-500",children:i})]}),l]})]})}var S=t(9001);function D(e){return S.ou.fromJSDate(e).toFormat("T")}var O=t(4574);function Z(){let[e,s]=(0,l.KO)(f),t=(0,l.b9)(h);return 0==e.length?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)("div",{className:"flex justify-center items-center my-5 mx-5",children:(0,n.jsx)("ul",{className:"w-full max-w-[640px]",children:e.toReversed().map(l=>{var a;return(0,n.jsx)("li",{className:"flex justify-between rounded-xl py-6 px-6 text-slate-400 transition-all shadow-lg hover:shadow-neutral-900 mb-4",children:(0,n.jsxs)("div",{className:"flex min-w-0 w-full",children:[(0,n.jsx)("div",{className:"min-w-0 flex-auto grow",children:(0,n.jsxs)("p",{className:"text-xl font-semibold leading-6",children:[(0,n.jsx)("span",{className:"mr-1 text-3xl text-yellow-600",children:(a=new Date(l.started),S.ou.fromJSDate(a).toFormat("yyyy-MM-dd"))}),(0,n.jsx)("span",{className:"text-sm mr-1 text-yellow-700",children:D(new Date(l.started))}),(0,n.jsx)("span",{className:"text-md",children:"에 시작한 게임"})]})}),(0,n.jsxs)("div",{className:"shrink-0 flex flex-row items-center gap-x-2",children:[(0,n.jsx)("button",{className:"btn btn-sm btn-info text-xs",onClick:()=>{t(function(e){if("undefined"==typeof localStorage)return null;let s=localStorage.getItem("modooGame-".concat(e));return s?JSON.parse(s):null}(l.id))},children:"게임보기"}),(0,n.jsx)("button",{className:"btn btn-sm btn-error",onClick:()=>(function(t){if(confirm("게임기록을 제거하시겠습니까?")){var n;s([...e].filter(e=>e.id!=t.id)),n=t.id,"undefined"!=typeof localStorage&&localStorage.removeItem("modooGame-".concat(n))}})(l),children:(0,n.jsx)(O.Z,{className:"h-4 w-4"})})]})]})},l.id)})})})}function F(){let[e,s]=(0,a.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"hero",children:(0,n.jsx)("div",{className:"hero-content",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("img",{src:"/modoo.png",className:"w-full",alt:"모두의 마블"}),(0,n.jsx)("h1",{className:"text-2xl",children:"모두의 마블 점수 계산기"}),(0,n.jsxs)("div",{className:"mt-10",children:[(0,n.jsxs)("button",{className:"btn btn-primary btn-wide",onClick:()=>s(!0),children:[(0,n.jsx)(g.Z,{className:"h-6 w-6"})," 새로운 게임 시작하기"]}),(0,n.jsx)(k,{title:"새로운 게임 시작하기",subTitle:"새로운 게임을 시작합니다. 시작 옵션을 정해주세요.",open:e,onClose:()=>s(!1),children:(0,n.jsx)(C,{})})]})]})})}),(0,n.jsx)(Z,{})]})}var I=t(1445);let G=new Intl.NumberFormat;var M=t(8842);function _(){let e=(0,l.Dv)(h);return e?(0,n.jsx)("div",{className:"flex justify-center my-10 mx-5",children:(0,n.jsx)("ul",{className:"timeline timeline-vertical timeline-compact px-4 w-full max-w-[640px]",children:e.histories.map((e,s)=>{var t;return(0,n.jsxs)("li",{style:{fontSize:12},children:[(0,n.jsx)("hr",{style:{height:10}}),(0,n.jsx)("div",{className:"timeline-start",children:D(new Date(e.time))}),(0,n.jsx)("div",{className:"timeline-middle",children:(0,n.jsx)(M.Z,{className:"h-5 w-5"})}),(0,n.jsxs)("div",{className:"timeline-end ",children:[e.fromName," -> ",e.toName," : ",(0,n.jsx)("b",{className:"text-success",children:(t=e.amount,G.format(t))})]}),(0,n.jsx)("hr",{})]},s)})})}):(0,n.jsx)(n.Fragment,{})}var K=t(9599),E=t(6255),J=t(9625);function L(e){let{player:s}=e,[t,c]=(0,a.useState)(!1),[o,m]=(0,a.useState)(3e5),[d,x]=(0,a.useState)("bank"),u=(0,l.Dv)(h),j=(0,J.lV)((0,a.useCallback)((e,t,n,l)=>{let a;function r(e,s,t){let n=e.findIndex(e=>e.id==s),l=e[n];return e.splice(n,1,{...l,money:l.money+t}),l}let i=e(h);if(!i){console.log("NO currentGame");return}let c=[...i.players];r(c,s.id,-l),a="bank"!=n?r(c,n,l).name:"은행";let o=[{fromId:s.id,fromName:s.name,toId:n,toName:a,amount:l,time:new Date},...i.histories];t(h,{...i,players:c,histories:o})},[s]));return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(K.Z,{className:"w-8 h-8 p-1 text-primary",onClick:()=>c(!0)}),t&&(0,n.jsx)(k,{title:"".concat(s.name," : 돈 보내기"),open:t,onClose:()=>c(!1),children:(0,n.jsxs)(i,{onSubmit:function(e){e.preventDefault(),j(d,o),c(!1)},children:[(0,n.jsx)(r,{label:"보낼 곳",children:(0,n.jsxs)("select",{className:"select select-bordered w-full",value:d,onChange:e=>x(e.target.value),children:[(0,n.jsx)("option",{value:"bank",children:"은행"}),u&&u.players.filter(e=>e.id!=s.id).map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))]})}),(0,n.jsx)(r,{label:"금액",children:(0,n.jsx)(y,{value:o,onChange:m})}),(0,n.jsx)(r,{children:(0,n.jsxs)("button",{type:"submit",className:"btn btn-primary w-full",children:[(0,n.jsx)(K.Z,{className:"w-6 h-6"})," 보내기"]})})]})})]})}function z(e){let{player:s}=e,[t,l]=(0,a.useState)(!1),[c,o]=(0,a.useState)(3e5),m=(0,J.lV)((0,a.useCallback)((e,t)=>{let n=e(h);if(!n){console.log("NO currentGame");return}let l=n.players,a=l.findIndex(e=>e.id==s.id),r=l[a],i=[...l];i.splice(a,1,{...r,money:r.money+c});let o=[{fromId:"bank",fromName:"은행",toId:s.id,toName:s.name,amount:c,time:new Date},...n.histories];t(h,{...n,players:i,histories:o})},[s,c]));return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(E.Z,{className:"w-8 h-8 p-1 text-accent",onClick:()=>l(!0)}),t&&(0,n.jsx)(k,{title:"".concat(s.name," : 은행에서 돈 받기"),open:t,onClose:()=>l(!1),children:(0,n.jsxs)(i,{onSubmit:function(e){e.preventDefault(),m(),l(!1)},children:[(0,n.jsx)(r,{label:"금액",children:(0,n.jsx)(y,{value:c,onChange:o})}),(0,n.jsx)(r,{children:(0,n.jsxs)("button",{type:"submit",className:"btn btn-accent w-full",children:[(0,n.jsx)(E.Z,{className:"w-6 h-6"})," 받기"]})})]})})]})}var P=t(7759);function T(e){var s;let{player:t}=e,r=(0,l.Dv)(h),i=(0,a.useMemo)(()=>{if(!r)return!1;let e=[...r.players].sort((e,s)=>s.money-e.money),s=e[0],n=e[e.length-1];return t.money==s.money&&t.money>n.money},[r,t]);return r?(0,n.jsxs)("div",{className:"flex min-w-0 gap-x-4 w-full",children:[(0,n.jsxs)("div",{className:"min-w-0 flex-auto grow",children:[(0,n.jsxs)("div",{className:"flex w-full gap-x-2",children:[i&&(0,n.jsx)(P.Z,{className:"h-5 w-5 text-red-400"}),(0,n.jsx)("p",{className:"text-xl font-semibold leading-6",children:t.name})]}),(0,n.jsx)("p",{className:"mt-2 truncate text-3xl leading-8 text-yellow-100",children:(s=t.money,G.format(s))})]}),(0,n.jsxs)("div",{className:"shrink-0 flex flex-row items-center gap-x-1",children:[(0,n.jsx)(L,{player:t}),(0,n.jsx)(z,{player:t})]})]}):(0,n.jsx)(n.Fragment,{})}function V(){let e=(0,l.Dv)(h);return e?(0,n.jsx)("div",{className:"flex justify-center items-center my-5 mx-5",children:(0,n.jsx)("ul",{className:"divide-y divide-gray-800 w-full max-w-[640px] px-4 py-2 rounded-xl border border-gray-800",children:e.players.map(e=>(0,n.jsx)("li",{className:"flex justify-between gap-x-6 py-6",children:(0,n.jsx)(T,{player:e})},e.id))})}):(0,n.jsx)(n.Fragment,{})}function A(){let e=(0,J.oC)(h);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"hero",children:(0,n.jsx)("div",{className:"hero-content",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("img",{src:"/modoo.png",className:"w-full",alt:"모두의 마블"}),(0,n.jsx)("h1",{className:"text-2xl font-bold",children:"모두의 마블 점수 계산기"}),(0,n.jsx)("div",{className:"mt-10",children:(0,n.jsxs)("button",{className:"btn btn-warning btn-wide",onClick:e,children:[(0,n.jsx)(I.Z,{className:"h-6 w-6"})," 게임 종료"]})})]})})}),(0,n.jsx)(V,{}),(0,n.jsx)(_,{})]})}function R(){return((0,l.KO)(j),(0,l.KO)(u),(0,l.Dv)(h))?(0,n.jsx)(A,{}):(0,n.jsx)(F,{})}function q(){return(0,n.jsx)(l.zt,{children:(0,n.jsx)(R,{})})}function B(){return(0,n.jsxs)("main",{className:"min-h-screen",children:[(0,n.jsx)("div",{className:"navbar bg-base-100",children:(0,n.jsx)("a",{href:"/",className:"btn btn-ghost test-xl",children:"보드게임 도우미"})}),(0,n.jsx)(q,{})]})}}},function(e){e.O(0,[554,971,69,744],function(){return e(e.s=9294)}),_N_E=e.O()}]);